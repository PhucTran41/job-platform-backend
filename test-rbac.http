### Variables
@baseUrl = http://localhost:5001/api
@userToken = eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOjIsImVtYWlsIjoidXNlckB0ZXN0LmNvbSIsInJvbGUiOiJVU0VSIiwiaWF0IjoxNzYzMDI1MTEwLCJleHAiOjE3NjM2Mjk5MTB9.adPt92zKqfGoz4BYvKIh0EbwJ0eb78ega-TGQp1QLPw
@adminToken = eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOjEsImVtYWlsIjoiYWRtaW5AdGVzdC5jb20iLCJyb2xlIjoiQURNSU4iLCJpYXQiOjE3NjMwMjUzNjgsImV4cCI6MTc2MzYzMDE2OH0.uLzHN3Sh_L98GC6bJGhQR-8bfXoGUpDKseyoRY1_pOA

### ============================================
### 1. LOGIN TO GET TOKENS
### ============================================

### Login as regular user
POST {{baseUrl}}/auth/login
Content-Type: application/json

{
  "email": "user@test.com",
  "password": "User123!"
}

### Login as admin
POST {{baseUrl}}/auth/login
Content-Type: application/json

{
  "email": "admin@test.com",
  "password": "Admin123!"
}

### ============================================
### 2. USER TESTS (Should Fail with 403)
### ============================================

### Try to create product as USER (should fail - 403)
POST {{baseUrl}}/products
Authorization: Bearer {{userToken}}
Content-Type: application/json

{
  "title": "Unauthorized Product",
  "description": "This should not be created",
  "price": 999,
  "stock": 10,
  "brand": "Test",
  "category": "test"
}

### Try to update product as USER (should fail - 403)
PUT {{baseUrl}}/products/1
Authorization: Bearer {{userToken}}
Content-Type: application/json

{
  "price": 1.00
}

### Try to delete product as USER (should fail - 403)
DELETE {{baseUrl}}/products/1
Authorization: Bearer {{userToken}}

### ============================================
### 3. ADMIN TESTS (Should Succeed)
### ============================================

### Create product as ADMIN (should work - 201)
POST {{baseUrl}}/products
Authorization: Bearer {{adminToken}}
Content-Type: application/json

{
  "title": "Admin Created Laptop",
  "description": "High-performance gaming laptop with RTX 4090",
  "price": 2999.99,
  "discountPercentage": 10,
  "rating": 4.9,
  "stock": 15,
  "brand": "ASUS",
  "category": "laptops",
  "thumbnail": "https://example.com/laptop.jpg",
  "images": ["https://example.com/laptop1.jpg", "https://example.com/laptop2.jpg"]
}

### Update product as ADMIN (should work - 200)
PUT {{baseUrl}}/products/31
Authorization: Bearer {{adminToken}}
Content-Type: application/json

{
  "price": 2799.99,
  "stock": 20
}

### Delete product as ADMIN (should work - 200)
DELETE {{baseUrl}}/products/31
Authorization: Bearer {{adminToken}}

### ============================================
### 4. VALIDATION TESTS
### ============================================

### Create product with invalid data (should fail - 400)
POST {{baseUrl}}/products
Authorization: Bearer {{adminToken}}
Content-Type: application/json

{
  "title": "AB",
  "description": "Too short",
  "price": -10,
  "stock": -5
}

### Create product with missing required fields (should fail - 400)
POST {{baseUrl}}/products
Authorization: Bearer {{adminToken}}
Content-Type: application/json

{
  "title": "Incomplete Product"
}

